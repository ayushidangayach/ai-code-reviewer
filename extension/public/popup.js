import{c as g,j as e,r as s,M as x}from"./assets/MarkdownViewer-0ppmWBDY.js";const p=()=>{const[r,m]=s.useState(""),[n,i]=s.useState(""),[o,d]=s.useState(!1),[l,a]=s.useState(""),c=async()=>{if(!r.trim()){a("Please enter a GitHub PR URL");return}d(!0),a(""),i("");try{const t=await fetch(`http://localhost:3000/api/github-diff?url=${encodeURIComponent(r)}`),f=await t.json();if(!t.ok||!f.diff)throw new Error("Failed to fetch diff. Make sure the URL is valid and the backend is running.");const u=await fetch("http://localhost:3000/api/review",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({diff:f.diff})}),h=await u.json();if(!u.ok||!h.review)throw new Error("Failed to get review. Please try again.");i(h.review)}catch(t){a(t instanceof Error?t.message:"An error occurred")}finally{d(!1)}},b=t=>{t.key==="Enter"&&c()};return e.jsxs("div",{className:"w-96 max-h-96 overflow-y-auto p-4 bg-white",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Review for PR"}),e.jsx("textarea",{value:r,onChange:t=>m(t.target.value),onKeyPress:b,placeholder:"Paste GitHub PR URL here...",className:"w-full h-20 p-2 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:c,disabled:o,className:"w-full mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:o?"Reviewing...":"Review with AI"}),l&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700",children:["‚ùå ",l]}),o&&e.jsxs("div",{className:"mt-4 flex items-center justify-center text-gray-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600 mr-2"}),e.jsx("span",{children:"Loading..."})]}),n&&e.jsx("div",{className:"mt-4",children:e.jsx(x,{content:n})})]})},w=document.getElementById("root");w&&g.createRoot(w).render(e.jsx(p,{}));
